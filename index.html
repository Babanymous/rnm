<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-137 Galactic Scanner</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New', monospace; }
        
        /* Rick and Morty UI Overlay */
        #gui {
            position: absolute; top: 20px; left: 20px;
            border: 4px solid #00ff41; background: rgba(0, 20, 0, 0.85);
            padding: 20px; color: #00ff41; border-radius: 15px;
            box-shadow: 0 0 20px #00ff41, inset 0 0 10px #00ff41;
            pointer-events: none; z-index: 100;
        }

        .label {
            position: absolute; color: white; background: rgba(0,0,0,0.7);
            padding: 2px 5px; border: 1px solid #00ff41; border-radius: 4px;
            font-size: 12px; pointer-events: none; text-transform: uppercase;
        }

        #crosshair {
            position: absolute; top: 50%; left: 50%; width: 60px; height: 60px;
            border: 2px solid #ff00ff; border-radius: 50%; transform: translate(-50%, -50%);
            pointer-events: none; box-shadow: 0 0 10px #ff00ff;
        }
    </style>
</head>
<body>

    <div id="gui">
        <h2 style="margin:0">SCANNER: MILKY WAY</h2>
        <p style="color: #ffff00">> COORDINATES: EARTH (C-137)</p>
        <p>> DETECTING: 8 PLANETS, 4 FAMOUS STARS</p>
        <p style="font-size: 10px; color: #00ccff;">SCROLL TO ZOOM | DRAG TO ROTATE</p>
    </div>
    <div id="crosshair"></div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- SCENE SETUP ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        camera.position.set(30, 50, 80);

        // --- RICK & MORTY STYLE PLANET BUILDER ---
        function createToonPlanet(radius, color, position, name) {
            const group = new THREE.Group();

            // 1. The Planet Core
            const geometry = new THREE.SphereGeometry(radius, 32, 32);
            const material = new THREE.MeshBasicMaterial({ color: color });
            const planet = new THREE.Mesh(geometry, material);
            group.add(planet);

            // 2. The BLACK OUTLINE (The "Rick" style)
            // We create a slightly larger sphere, inverted
            const outlineMat = new THREE.MeshBasicMaterial({ color: 0x000000, side: THREE.BackSide });
            const outlineMesh = new THREE.Mesh(geometry, outlineMat);
            outlineMesh.scale.multiplyScalar(1.15); // Make it 15% bigger
            group.add(outlineMesh);

            group.position.set(position.x, position.y, position.z);
            scene.add(group);

            // Add Text Label
            const div = document.createElement('div');
            div.className = 'label';
            div.textContent = name;
            document.body.appendChild(div);

            return { mesh: group, label: div };
        }

        // --- DATA: SOLAR SYSTEM ---
        const planets = [
            { name: "Sun", r: 3, c: 0xffcc00, pos: {x:0, y:0, z:0} },
            { name: "Mercury", r: 0.4, c: 0xaaaaaa, pos: {x:6, y:0, z:0} },
            { name: "Venus", r: 0.8, c: 0xff8800, pos: {x:10, y:0, z:5} },
            { name: "Earth", r: 0.9, c: 0x0088ff, pos: {x:15, y:0, z:-5} },
            { name: "Mars", r: 0.6, c: 0xff4400, pos: {x:20, y:0, z:8} },
            { name: "Jupiter", r: 2.2, c: 0xd8a37d, pos: {x:30, y:0, z:-15} },
            { name: "Saturn", r: 1.8, c: 0xead6b8, pos: {x:40, y:0, z:10} },
        ];

        const planetObjects = planets.map(p => createToonPlanet(p.r, p.c, p.pos, p.name));

        // --- DATA: FAMOUS STARS (GAIA DATA APPROX) ---
        createToonPlanet(1.5, 0xffffff, {x: 100, y: 20, z: -50}, "Sirius");
        createToonPlanet(2.5, 0xff3300, {x: -150, y: 50, z: 100}, "Betelgeuse");
        createToonPlanet(1.2, 0x00ffff, {x: 40, y: -30, z: 80}, "Alpha Centauri");

        // --- THE GALAXY (MILKY WAY STRUCTURE) ---
        const starCount = 120000;
        const starGeo = new THREE.BufferGeometry();
        const starPos = new Float32Array(starCount * 3);
        const starCol = new Float32Array(starCount * 3);

        for(let i=0; i<starCount; i++) {
            const i3 = i * 3;
            const radius = Math.random() * 250;
            const spin = radius * 0.1;
            const branch = (i % 4) * (Math.PI / 2); // 4 arms

            starPos[i3] = Math.cos(spin + branch) * radius + (Math.random()-0.5) * (radius * 0.2);
            starPos[i3+1] = (Math.random()-0.5) * (15 / (radius * 0.05 + 1)); // Thinning at edges
            starPos[i3+2] = Math.sin(spin + branch) * radius + (Math.random()-0.5) * (radius * 0.2);

            // Rick's neon colors
            const mix = radius / 250;
            starCol[i3] = 0.2 + mix; // R
            starCol[i3+1] = 1.0 - mix; // G
            starCol[i3+2] = 0.5 + mix; // B
        }

        starGeo.setAttribute('position', new THREE.BufferAttribute(starPos, 3));
        starGeo.setAttribute('color', new THREE.BufferAttribute(starCol, 3));
        
        const starMat = new THREE.PointsMaterial({
            size: 0.5,
            vertexColors: true,
            transparent: true,
            opacity: 0.8
        });

        const galaxy = new THREE.Points(starGeo, starMat);
        scene.add(galaxy);

        // --- ANIMATION LOOP ---
        function animate() {
            requestAnimationFrame(animate);
            
            // Slowly spin the whole galaxy
            galaxy.rotation.y += 0.0005;

            // Update Labels (Project 3D to 2D)
            planetObjects.forEach(obj => {
                const vector = obj.mesh.position.clone();
                vector.project(camera);

                if(vector.z < 1) { // Only show if in front of camera
                    const x = (vector.x * .5 + .5) * window.innerWidth;
                    const y = (vector.y * -.5 + .5) * window.innerHeight;
                    obj.label.style.display = 'block';
                    obj.label.style.left = x + 'px';
                    obj.label.style.top = y + 'px';
                } else {
                    obj.label.style.display = 'none';
                }
            });

            controls.update();
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        animate();
    </script>
</body>
</html>
